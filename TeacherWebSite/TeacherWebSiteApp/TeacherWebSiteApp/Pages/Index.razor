@page "/"
@inject IDbContextFactory<TeacherContext> DbFactory
@inject NavigationManager NavManager
@layout MainLayout
@namespace TeacherWebSiteApp.Pages

@if (data != null && data.IsBannerEnabled)
{
     <BigBanner Picture="@(data.BigPictureData)" Text="@data.BigPictureText" Title="@data.BigPictureTitle" />
}


@code{
    private MainPage data = new MainPage();

    protected override async Task OnInitializedAsync()
    {
        using var context = DbFactory.CreateDbContext();

        data = await context.MainPages.FirstOrDefaultAsync(d => d.IsActiveProfile == true);

        if (data == null)
        {
            NavManager.NavigateTo("/publications");
        }
    }
}

