@page "/index"
@inject IDbContextFactory<TeacherContext> DbFactory
@inject NavigationManager NavManager
@layout MainLayout
@namespace TeacherWebSiteApp.Pages

@if (data != null && data.IsBannerEnabled)
{
    <div style="height: 100%">
        <BigBanner Picture="@(data.BigPictureData)" Text="@data.BigPictureText" Title="@data.BigPictureTitle" />
    </div>

    
}
@*<div>
    <Carousel Autoplay="TimeSpan.FromSeconds(2)">
        <CarouselSlick>
            <h3>1</h3>
        </CarouselSlick>
        <CarouselSlick>
            <h3>2</h3>
        </CarouselSlick>
        <CarouselSlick>
            <h3>3</h3>
        </CarouselSlick>
        <CarouselSlick>
            <h3>4</h3>
        </CarouselSlick>
    </Carousel>
</div>*@

@code{
    private MainPage data = new MainPage();

    protected override async Task OnInitializedAsync()
    {
        using var context = DbFactory.CreateDbContext();

        data = await context.MainPages.FirstOrDefaultAsync(d => d.IsActiveProfile == true);

        if (data == null)
        {
            NavManager.NavigateTo("/publications");
        }
    }
}

